#!/bin/bash

beginner=0
path="."

for arg in "$@"; do
  case $arg in

    -h|--help)
      echo "usage: elm-new [-V|--version] [-h|--help] [-b|--beginner] [path]"
      exit
      ;;

    -V|--version)
      echo "1.0.1"
      exit
      ;;

    -b|--beginner)
      beginner=1
      shift
      ;;

    -*)
      >&2 echo "elm-new: illegal option -- $arg"
      >&2 elm-new --help
      exit 1
      ;;

    *)
      path="$1"
      shift
  esac
done


mkdir -p "$path"
cp -R "${0%/*}/../share/elm-new/". "$path"


if [ "$beginner" = 1 ] ; then
  mv "$path/src/MainBeginner.elm" "$path/src/Main.elm"
else
  rm "$path/src/MainBeginner.elm"
fi


tree -a "$path" 2>/dev/null


printf "\nYour Elm program has been created successfully.\n"
printf "You can use \"elm-make\" to compile it:\n\n"
printf "    elm-make src/Main.elm\n\n"
printf "Run \"elm\" for more commands.\n\n"
