#!/bin/bash

choice=default
path=.
synopsis='usage: elm-new [path] [-b|--beginner] [--hello-world] [--navigation]
                         [-h|--help] [-V|--version]
'

for arg in "$@"; do
  case $arg in

    -h|--help)
      echo $synopsis
      exit
      ;;

    -V|--version)
      echo 1.2.0
      exit
      ;;

    -b|--beginner)
      choice=beginner
      shift
      ;;

    --hello-world)
      choice=hello-world
      shift
      ;;

    --navigation)
      choice=navigation
      shift
      ;;

    -*)
      >&2 echo "elm-new: illegal option $arg"
      echo $synopsis
      exit 1
      ;;

    *)
      path="$1"
      shift
  esac
done

mkdir -p "$path"
cp -R "${0%/*}/../share/elm-new/$choice/". "$path"

tree -a "$path" 2>/dev/null

echo '
Your Elm program has been created successfully.
You can use "elm-make" to compile it:

    elm-make src/Main.elm

Run "elm" for more commands.
'
